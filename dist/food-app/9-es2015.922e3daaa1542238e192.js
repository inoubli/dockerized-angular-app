(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{SuQF:function(e,r,s){"use strict";s.r(r),s.d(r,"SecurityModule",(function(){return Z}));var n=s("ofXK"),t=s("tyNb"),o=s("3Pt+"),c=s("fXoL"),i=s("f4AX"),a=s("lPP5"),u=s("5eHb");function l(e,r){if(1&e&&(c.ac(0,"div",4),c.Bc(1),c.Zb()),2&e){const e=c.kc();c.Jb(1),c.Dc(" ",e.serverErrorMessages," ")}}function m(e,r){1&e&&(c.ac(0,"div",5),c.Wb(1,"img",6),c.Zb())}function d(e,r){1&e&&(c.ac(0,"p"),c.Bc(1,"Username field is required."),c.Zb())}function b(e,r){if(1&e&&(c.ac(0,"p"),c.Bc(1),c.Zb()),2&e){const e=c.kc(2);c.Jb(1),c.Dc("username must be 3 characters long, we need another ",e.f.username.errors.minlength.requiredLength-e.f.username.errors.minlength.actualLength," characters ")}}function f(e,r){1&e&&(c.ac(0,"p"),c.Bc(1,"Password field is required."),c.Zb())}function p(e,r){if(1&e&&(c.ac(0,"p"),c.Bc(1),c.Zb()),2&e){const e=c.kc(2);c.Jb(1),c.Dc("Password must be 3 characters long, we need another ",e.f.password.errors.minlength.requiredLength-e.f.password.errors.minlength.actualLength," characters ")}}const g=function(e,r){return{"is-invalid":e,"is-valid":r}};function h(e,r){if(1&e){const e=c.bc();c.ac(0,"div",7),c.ac(1,"div",8),c.ac(2,"h3"),c.Bc(3,"Sign-in"),c.Zb(),c.Zb(),c.ac(4,"div",9),c.ac(5,"form",10),c.ac(6,"fieldset"),c.ac(7,"div",11),c.ac(8,"label",12),c.Bc(9,"Email"),c.ac(10,"span",13),c.Bc(11,"*"),c.Zb(),c.Zb(),c.Wb(12,"input",14),c.ac(13,"div",15),c.Ac(14,d,2,0,"p",16),c.Ac(15,b,2,1,"p",16),c.Zb(),c.Zb(),c.ac(16,"div",11),c.ac(17,"label",17),c.Bc(18,"Password"),c.ac(19,"span",13),c.Bc(20,"*"),c.Zb(),c.Zb(),c.Wb(21,"input",18),c.ac(22,"div",15),c.Ac(23,f,2,0,"p",16),c.Ac(24,p,2,1,"p",16),c.Zb(),c.Zb(),c.ac(25,"div",11),c.ac(26,"div",19),c.Wb(27,"input",20),c.ac(28,"label",21),c.Bc(29,"Remember me"),c.Zb(),c.Zb(),c.Zb(),c.ac(30,"button",22),c.ic("click",(function(){return c.vc(e),c.kc().onSubmit()})),c.Bc(31,"Submit"),c.Zb(),c.ac(32,"button",23),c.ic("click",(function(){return c.vc(e),c.kc().form.reset()})),c.Bc(33,"Rest"),c.Zb(),c.Zb(),c.Zb(),c.Zb(),c.Zb()}if(2&e){const e=c.kc();c.Jb(5),c.oc("formGroup",e.form),c.Jb(7),c.oc("ngClass",c.rc(8,g,e.f.username.errors&&(e.f.username.dirty||e.f.username.touched),!e.f.username.errors&&(e.f.username.dirty||e.f.username.touched))),c.Jb(2),c.oc("ngIf",null==e.f.username.errors?null:e.f.username.errors.required),c.Jb(1),c.oc("ngIf",null==e.f.username.errors?null:e.f.username.errors.minlength),c.Jb(6),c.oc("ngClass",c.rc(11,g,e.f.password.errors&&(e.f.password.dirty||e.f.password.touched),!e.f.password.errors&&(e.f.password.dirty||e.f.password.touched))),c.Jb(2),c.oc("ngIf",null==e.f.password.errors?null:e.f.password.errors.required),c.Jb(1),c.oc("ngIf",null==e.f.password.errors?null:e.f.password.errors.minlength),c.Jb(6),c.oc("disabled",e.form.invalid)}}let v=(()=>{class e{constructor(e,r,s,n,t){this.userService=e,this.router=r,this.formBuilder=s,this.loadingService=n,this.toastr=t,this.submitted=!1}get isLoading(){return this.loadingService._pendingRequests}ngOnInit(){this.userService.isLoggedIn()&&this.router.navigateByUrl("/home"),this.form=this.formBuilder.group({username:["",[o.o.required,o.o.minLength(4)]],password:["",[o.o.required,o.o.minLength(5)]],_remember_me:[""]})}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.form.invalid||this.userService.login(this.form.value).subscribe(e=>{this.userService.setToken(e.token),this.router.navigateByUrl("/home");let r=this.userService.getUserPayload1().username;this.toastr.success(r,"Logged in as",{timeOut:5e3,closeButton:!0})},e=>{this.serverErrorMessages=e.error.message})}}return e.\u0275fac=function(r){return new(r||e)(c.Vb(i.a),c.Vb(t.f),c.Vb(o.c),c.Vb(a.c),c.Vb(u.b))},e.\u0275cmp=c.Pb({type:e,selectors:[["app-sign-in"]],decls:4,vars:3,consts:[[1,"row"],["class","alert alert-dismissible alert-danger",4,"ngIf"],["class","row spinner",4,"ngIf"],["class","card border-info mb-3","style","max-width: 80rem; margin-top: 100px;",4,"ngIf"],[1,"alert","alert-dismissible","alert-danger"],[1,"row","spinner"],["src","./assets/images/spinner.svg","alt","Loading..."],[1,"card","border-info","mb-3",2,"max-width","80rem","margin-top","100px"],[1,"card-header"],[1,"card-body"],["novalidate","",3,"formGroup"],[1,"form-group"],["for","username",1,"form-control-label"],[1,"text-danger"],["id","username","type","text","name","username","formControlName","username",1,"form-control",3,"ngClass"],[1,"invalid-feedback"],[4,"ngIf"],["for","name",1,"form-control-label"],["id","password","type","password","name","password","formControlName","password",1,"form-control",3,"ngClass"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","_remember_me","name","_remember_me","formControlName","_remember_me","checked","",1,"custom-control-input"],["for","_remember_me",1,"custom-control-label"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],["type","button",1,"btn","btn-outline-primary","ml-md-3",3,"click"]],template:function(e,r){1&e&&(c.ac(0,"div",0),c.Ac(1,l,2,1,"div",1),c.Zb(),c.Ac(2,m,2,0,"div",2),c.Ac(3,h,34,14,"div",3)),2&e&&(c.Jb(1),c.oc("ngIf",r.serverErrorMessages),c.Jb(1),c.oc("ngIf",r.isLoading),c.Jb(1),c.oc("ngIf",!r.isLoading))},directives:[n.m,o.q,o.j,o.g,o.b,o.i,o.e,n.k,o.a],styles:[""]}),e})();const w=[{path:"",component:v,children:[{path:"",redirectTo:"signin",pathMatch:"full"},{path:"signin",component:v},{path:"signup",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=c.Pb({type:e,selectors:[["app-sign-up"]],decls:2,vars:0,template:function(e,r){1&e&&(c.ac(0,"p"),c.Bc(1,"sign-up works!"),c.Zb())},styles:[""]}),e})()},{path:"profile",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=c.Pb({type:e,selectors:[["app-profile-edit"]],decls:2,vars:0,template:function(e,r){1&e&&(c.ac(0,"p"),c.Bc(1,"profile-edit works!"),c.Zb())},styles:[""]}),e})()}]}];let y=(()=>{class e{}return e.\u0275mod=c.Tb({type:e}),e.\u0275inj=c.Sb({factory:function(r){return new(r||e)},imports:[[t.j.forChild(w)],t.j]}),e})(),Z=(()=>{class e{}return e.\u0275mod=c.Tb({type:e}),e.\u0275inj=c.Sb({factory:function(r){return new(r||e)},imports:[[n.c,y,o.h,o.l]]}),e})()}}]);